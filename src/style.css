*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
:root{
  --bg:#111113;--bg2:#1a1a1e;--bg3:#252529;
  --fg:#d4d4d8;--fg2:#a1a1aa;--fg3:#52525b;
  --accent:#7aa2f7;--accent2:#bb9af7;
  --border:#2a2a30;
  --code-bg:#161618;
  --warn-bg:#3d2e00;--warn-fg:#e0af68;
  --sidebar-w:min(480px,85vw);
  --radius:6px;
}
[data-theme="light"]{
  --bg:#f5f5f5;--bg2:#ffffff;--bg3:#e8e8e8;
  --fg:#1a1b26;--fg2:#343b58;--fg3:#9499b7;
  --accent:#2e59a8;--accent2:#7847bd;
  --border:#d0d0d0;
  --code-bg:#eaeaf2;
  --warn-bg:#fff3cd;--warn-fg:#856404;
}
html{font-size:16px}
body{
  background:var(--bg);color:var(--fg);
  font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;
  line-height:1.7;min-height:100vh;
  transition:background .2s,color .2s;
}

/* Floating icon buttons */
.icon-left{position:fixed;top:12px;left:12px;z-index:100}
.icon-right{position:fixed;top:12px;right:12px;z-index:100;display:flex;gap:4px}

button{
  background:none;border:none;color:var(--fg3);cursor:pointer;
  padding:6px;border-radius:var(--radius);font-size:.875rem;
  display:flex;align-items:center;gap:4px;
  transition:background .15s,color .15s;
}
button:hover{background:var(--bg3);color:var(--fg)}
button svg{width:18px;height:18px}

/* Truncation banner */
.truncation-banner{
  display:none;
  position:fixed;top:0;left:0;right:0;z-index:90;
  padding:8px 16px;
  background:var(--warn-bg);color:var(--warn-fg);
  font-size:.875rem;text-align:center;
  border-bottom:1px solid var(--warn-fg);
}
.truncation-banner.visible{display:block}

/* Main content */
.content{
  max-width:780px;margin:0 auto;
  padding:48px 24px 48px;
}

/* Page-load reveal */
@keyframes revealUp{
  from{opacity:0;transform:translateY(16px)}
  to{opacity:1;transform:translateY(0)}
}
.rendered.reveal{animation:revealUp .6s cubic-bezier(.16,1,.3,1) both}

/* Rendered markdown */
.rendered h1,.rendered h2,.rendered h3,.rendered h4,.rendered h5,.rendered h6{
  color:var(--fg);margin:1.5em 0 .5em;font-weight:600;line-height:1.3;
}
.rendered h1{font-size:2em;border-bottom:1px solid var(--border);padding-bottom:.3em}
.rendered h2{font-size:1.5em;border-bottom:1px solid var(--border);padding-bottom:.25em}
.rendered h3{font-size:1.25em}
.rendered p{margin:.8em 0}
.rendered a{color:var(--accent);text-decoration:none}
.rendered a:hover{text-decoration:underline}
.rendered strong{color:var(--fg);font-weight:600}
.rendered blockquote{
  border-left:3px solid var(--accent2);padding:.5em 1em;margin:1em 0;
  color:var(--fg2);background:var(--bg2);border-radius:0 var(--radius) var(--radius) 0;
}
.rendered ul,.rendered ol{padding-left:1.5em;margin:.5em 0}
.rendered li{margin:.25em 0}
.rendered code{
  background:var(--code-bg);padding:.15em .4em;border-radius:3px;
  font-size:.9em;font-family:'SF Mono',Consolas,'Liberation Mono',Menlo,monospace;
}
.rendered pre{
  background:var(--code-bg);padding:1em;border-radius:var(--radius);
  overflow-x:auto;margin:1em 0;border:1px solid var(--border);
}
.rendered pre code{background:none;padding:0;font-size:.875em}
.rendered table{
  border-collapse:collapse;width:100%;margin:1em 0;
}
.rendered th,.rendered td{
  border:1px solid var(--border);padding:.5em .75em;text-align:left;
}
.rendered th{background:var(--bg2);font-weight:600}
.rendered img{max-width:100%;border-radius:var(--radius)}
.rendered hr{border:none;border-top:1px solid var(--border);margin:2em 0}

/* Empty state */
.empty-state{
  display:flex;flex-direction:column;align-items:center;justify-content:center;
  min-height:60vh;color:var(--fg3);text-align:center;
}
.empty-state h2{font-size:1.5rem;margin-bottom:.25rem;color:var(--fg2)}
.empty-tagline{font-size:.95rem;margin-bottom:2rem}
.empty-features{
  display:flex;flex-direction:column;gap:1rem;
  max-width:380px;text-align:left;
}
.empty-feature{
  display:flex;gap:.75rem;align-items:baseline;
  font-size:.85rem;line-height:1.5;color:var(--fg3);
}
.empty-icon{
  flex-shrink:0;width:1.2em;text-align:center;font-size:.9rem;
}
.empty-feature em{font-style:italic;color:var(--fg2)}

/* Sidebar overlay */
.overlay{
  position:fixed;top:0;left:0;right:0;bottom:0;z-index:200;
  background:rgba(0,0,0,.5);opacity:0;pointer-events:none;
  transition:opacity .2s;
}
.overlay.open{opacity:1;pointer-events:all}

/* Sidebar / Editor */
.sidebar{
  position:fixed;top:0;left:0;bottom:0;z-index:300;
  width:var(--sidebar-w);
  background:var(--bg);border-right:1px solid var(--border);
  transform:translateX(-100%);transition:transform .25s ease;
  display:flex;flex-direction:column;
}
.sidebar.open{transform:translateX(0)}
.sidebar-header{
  display:flex;align-items:center;justify-content:space-between;
  padding:8px 12px;
  min-height:48px;
}
.sidebar-header span{font-weight:600;font-size:.95rem}
.editor-wrap{flex:1;display:flex;flex-direction:column;overflow:hidden}
.editor{
  flex:1;width:100%;resize:none;border:none;outline:none;
  background:var(--bg);color:var(--fg);
  font-family:'SF Mono',Consolas,'Liberation Mono',Menlo,monospace;
  font-size:.875rem;line-height:1.6;padding:16px;
  tab-size:2;
}
.editor::placeholder{color:var(--fg3)}
.editor-footer{
  padding:8px 12px;
  display:flex;align-items:center;justify-content:space-between;
  font-size:.8rem;color:var(--fg3);
}

/* Toast */
.toast{
  position:fixed;bottom:24px;left:50%;transform:translateX(-50%) translateY(80px);
  background:var(--bg2);color:var(--fg);border:1px solid var(--border);
  padding:8px 16px;border-radius:var(--radius);font-size:.875rem;
  opacity:0;transition:transform .3s,opacity .3s;z-index:999;
  pointer-events:none;
}
.toast.show{transform:translateX(-50%) translateY(0);opacity:1}

/* Encrypted landing screen */
.encrypted-screen{
  position:fixed;top:0;left:0;right:0;bottom:0;z-index:500;
  background:var(--bg);display:flex;align-items:center;justify-content:center;
  flex-direction:column;gap:8px;
}
.encrypted-screen input{
  padding:8px 12px;border-radius:var(--radius);
  border:1px solid var(--border);background:transparent;color:var(--fg);
  font-size:.9rem;outline:none;text-align:center;width:200px;
}
.encrypted-screen input:focus{border-color:var(--fg3)}
.encrypted-screen .error-msg{
  color:#f87171;font-size:.8rem;height:1.2em;
}
@keyframes shake{
  0%,100%{transform:translateX(0)}
  15%,45%,75%{transform:translateX(-6px)}
  30%,60%,90%{transform:translateX(6px)}
}
.shake{animation:shake .4s ease-in-out}

/* Lock toggle in editor footer */
.lock-btn{
  display:flex;align-items:center;gap:2px;
  padding:2px 6px;border-radius:3px;
  font-size:.8rem;cursor:pointer;
  background:none;border:none;color:var(--fg3);
  transition:color .15s,background .15s;
}
.lock-btn:hover{color:var(--fg);background:var(--bg3)}
.lock-btn.active{color:var(--accent)}
.lock-btn svg{width:14px;height:14px}
.footer-left{display:flex;align-items:center;gap:8px}
.password-inline{
  display:none;align-items:center;gap:4px;
}
.password-inline.visible{display:flex}
.password-inline input{
  width:100px;padding:2px 6px;border-radius:3px;
  border:1px solid var(--border);background:var(--bg);color:var(--fg);
  font-size:.75rem;outline:none;
  font-family:inherit;
}
.password-inline input:focus{border-color:var(--accent)}
.eye-btn{padding:2px;color:var(--fg3);opacity:.5}
.eye-btn:hover{opacity:1;background:none}
.eye-btn svg{width:14px;height:14px}

/* Desktop: sidebar pushes content */
@media(min-width:641px){
  :root{--sidebar-w:clamp(400px,42vw,640px)}
  .content{transition:margin-left .25s ease}
  body.sidebar-open .content{margin-left:var(--sidebar-w)}
  .overlay.open{opacity:0;pointer-events:none}
}

/* Mobile */
@media(max-width:640px){
  .sidebar{width:100vw}
  .content{padding:48px 16px 32px}
}
