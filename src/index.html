<!DOCTYPE html>
<html lang="en" data-theme="dark" style="background:#111113">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>mdash</title>
<link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>—</text></svg>">
</head>
<body style="opacity:0">

<!-- Floating icons -->
<div class="icon-left">
  <button id="menuBtn" aria-label="Open editor">
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"/><path d="m15 5 4 4"/></svg>
  </button>
</div>
<div class="icon-right">
  <button id="copyBtn" aria-label="Copy link">
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg>
  </button>
  <button id="themeBtn" aria-label="Toggle theme">
    <svg id="themeIcon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/></svg>
  </button>
</div>

<!-- Truncation banner -->
<div class="truncation-banner" id="truncBanner">
  Content was truncated to fit the URL character limit.
</div>

<!-- Main content area -->
<div class="content">
  <div class="rendered" id="rendered"></div>
  <div class="empty-state" id="emptyState">
    <h2>mdash</h2>
    <p class="empty-tagline">Markdown that lives entirely in the URL.</p>
    <div class="empty-features">
      <div class="empty-feature">
        <span class="empty-icon">&#9998;</span>
        <span>Write markdown, share the link. No server, no storage — your content <em>is</em> the URL.</span>
      </div>
      <div class="empty-feature">
        <span class="empty-icon">&#128274;</span>
        <span>Encrypt with a password. Only someone with the key can read it.</span>
      </div>
      <div class="empty-feature">
        <span class="empty-icon">&#8776;</span>
        <span>Content is compressed, but URLs have browser limits (~2KB safe, ~64KB max). Keep it concise.</span>
      </div>
    </div>
  </div>
</div>

<!-- Overlay -->
<div class="overlay" id="overlay"></div>

<!-- Sidebar editor -->
<div class="sidebar" id="sidebar" hidden>
  <div class="sidebar-header">
    <span>Editor</span>
    <button id="closeBtn" aria-label="Close editor">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
    </button>
  </div>
  <div class="editor-wrap">
    <textarea class="editor" id="editor" placeholder="Write markdown here..." spellcheck="false"></textarea>
    <div class="editor-footer">
      <div class="footer-left">
        <span id="charCount">0 chars</span>
        <button class="lock-btn" id="lockBtn" aria-label="Toggle encryption" type="button">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><rect x="3" y="11" width="18" height="11" rx="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>
        </button>
        <div class="password-inline" id="passwordInline">
          <input type="password" id="encPasswordInput" placeholder="password" autocomplete="off">
          <button class="eye-btn" id="eyeBtn" type="button" aria-label="Toggle password visibility">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" width="14" height="14"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/></svg>
          </button>
        </div>
      </div>
      <span id="encStatus"></span>
    </div>
  </div>
</div>

<!-- Encrypted landing screen -->
<div class="encrypted-screen" id="encryptedScreen" style="display:none">
  <input type="password" id="decryptInput" placeholder="password" autocomplete="off">
  <div class="error-msg" id="decryptError"></div>
</div>

<!-- Toast -->
<div class="toast" id="toast"></div>

<script type="module" src="./main.ts"></script>
</body>
</html>
